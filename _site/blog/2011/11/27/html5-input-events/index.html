<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>HTML5 Input Event Handlers and User-Experience &#8211; GirlieMac Blog</title>
<meta name="description" content="">
<meta name="keywords" content="">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/default-thumb.png">
<meta name="twitter:title" content="HTML5 Input Event Handlers and User-Experience">
<meta name="twitter:description" content="Arbitrary Web and Mobile Writing by Tomomi Imura">
<meta name="twitter:creator" content="@girlie_mac">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="HTML5 Input Event Handlers and User-Experience">
<meta property="og:description" content="Arbitrary Web and Mobile Writing by Tomomi Imura">
<meta property="og:url" content="/blog/2011/11/27/html5-input-events/">
<meta property="og:site_name" content="GirlieMac Blog">

<!-- Webmaster Tools verfication -->
<meta name="google-site-verification" content="I-NDFBl5t1P9fqHmRNZhwu8OOHmwW4HADPiOr_r16cE">



<link rel="canonical" href="/blog/2011/11/27/html5-input-events/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title=" Feed">


<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600,700' rel='stylesheet' type='text/css'>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr/modernizr.js"></script>

<!-- Icons -->

<!-- favicon -->
<link rel="shortcut icon" href="/assets/ico/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/assets/ico/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/ico/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/ico/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/ico/apple-touch-icon-144x144-precomposed.png">


</head>

<body class="article" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="/index.html">GirlieMac.com</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="/about" >About</a></li>
		        
				<li><a href="/blog" >Archive</a></li>
		        
				<li><a href="/presentations" >Preso</a></li>
		        
				<li><a href="http://codepen.io/girliemac" target="_blank">My CodePen</a></li>
		        
				<li><a href="/nostalgia" >Nostalgia</a></li>
		        
		        <li><i class="icon-feed"></i> <a href="/feed.xml" title="Atom/RSS feed">Feed</a>
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->

<header role="banner">
</header>

<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  <div class="article-author-side">
  	<img src="/assets/images/avatar.jpg" class="bio-photo" alt="Tomomi Imura">
    <h3>Tomomi Imura</h3>
<p>An Open Web advocate and front-end engineer, who loves everything mobile, and writes about HTML5, CSS, JS, UX, tech events, gadgets, etc. She unintentionally got 15min of fame by creating The HTTP Status Cats. Also, the opinions expressed here are solely her own and do not express the views or opinions of my employer.</p>
<a href="http://twitter.com/girlie_mac" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>


<a href="http://linkedin.com/in/tomomi" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>

<a href="http://github.com/girliemac" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>


<a href="http://flickr.com/photos/girliemac" class="author-social" target="_blank"><i class="icon-flickr"></i> Flickr</a>
  </div>
  
  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      
      <time datetime="2011-11-27T00:00:00-08:00" itemprop="datePublished"><i class="icon-calendar"></i> November 27, 2011</time>
      
      
      <h1 itemprop="name">HTML5 Input Event Handlers and User-Experience</h1>
      <h2></h2>
    </div><!--/ .headline-wrap -->
    
    <div class="article-wrap" itemprop="text">
      <h2>TL;DR</h2>

<p>Summary: Use <code>oninput</code> event handler (or <code>input</code> event handler event type) when you register an event to the HTML5 <code>input[type=&quot;number&quot;]</code>, instead of <code>onchange</code>, <code>onkeyup/down</code> (although you may want to include them as the fall-back).</p>

<h2>The Whole Story</h2>

<p>When I participated to compete for <a href="http://nodeknockout.com/" target="_blank">Node.js Knock-out</a> in the end of the summer, I have learned one thing (besides all the node.js coolness) in a bitter way, from the comments by judges: &#8220;the app UI is confusing.&#8221;<br>
Actually, I believed that the app user-interface overall was intuitive enough, however, the one mistake I made with an HTML5 form killed the user-experience &#8211; I used a wrong event handler, something that doesn&#8217;t trigger when it needed to&#8230; </p>

<p>So here, I explain what I didn&#8217;t know; the newly introduced event handlers for HTML5.</p>

<p><img src="/assets/images/wp-content/uploads/2011/11/input-number.png" alt="input type=number" title="input-number" width="221" height="117" /></p>

<p>The screenshot above is a number input control, the input element with a type attribute which value is &#8220;number&#8221;. It represents a precise control for setting the element&#8217;s value to a string representing a number.</p>

<p>Simply, you can write this in html like this:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;number&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Pick a number&quot;</span> <span class="na">id=</span><span class="s">&quot;numPeople&quot;</span> <span class="nt">/&gt;</span>
</code></pre></div>
<p>You can add some more custom attributes like, <code>required</code>, <code>autofocus</code>, <code>pattern</code>, etc, and the number-specific attributes, <code>min</code>, <code>max</code>, and <code>step</code>. If you are not familiar with the html5 form input attributes, I recommend you should read <a href="http://dev.opera.com/articles/view/new-form-features-in-html5/" target="_blank">New form features in HTML5</a> by Dev Opera.</p>

<p>So what I wanted to do in the particular app was that populating new fields as the user chooses a number. The simple user-flow is:  </p>

<ol>
<li>&#8220;How many people would you like to add?&#8221; &#8211; e.g. a user picks 5<br></li>
<li>n-number of new fileds are populated &#8211; e.g. 5 text fileds are displayed<br></li>
<li>the user fills out the text fields<br></li>
<li>the user submit the form </li>
</ol>

<p><img src="/assets/images/wp-content/uploads/2011/11/input-number2.png" alt="screenshot" title="input-number2" width="340" height="300" class="alignnone size-full wp-image-338" /></p>

<p>To make the flow #1 and #2 work, what I did was that I registered an event listener to the number input element, and used an event type to listen for.<br>
OK, so which event type? &#8211; Well, I initially thought of <code>change</code>, however, it requires the user to unfocus (blur) the field once, to get the event captured. So, I decided to use <code>keyup</code> so as soon as the user finish typing a number, the event is fired and the function to display the extra fields is called.</p>

<p>OK, it sounds fine &#8211; well, only as long as the user only enter the number manually! </p>

<p>Remember, the HTML5 input field <code>type=&quot;number&quot;</code> has the special user-interface, <em>a spinner control</em>, which allows a user to increment and decrement its value. And here is the problem &#8211; the <em>keyup</em> event does <em>not</em> get triggered when the spinner up/down arrow is clicked, at least on Chrome (which the judges were using)! So when some judges tried the app for the first time without much knowing what it does, and picked a number with the spinner control, nothing happened. The app&#8217;s UX was killed right there!</p>

<p>So, really, which event did I need to use? </p>

<p>The answer is <code>input</code>. I did not know about the newly introduced HTML5 <code>oninput</code> event handler until I found <a href="http://whattheheadsaid.com/2010/09/effectively-detecting-user-input-in-javascript" target="_blank" />this article</a>.</p>

<p>Now, the action is triggered when a user manually type a number, or when the user increment/decrement with the up/down spinner!</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">numPeople</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;numPeople&quot;</span><span class="p">);</span>

<span class="nx">numPeople</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">num</span> <span class="o">=</span> <span class="nx">numPeople</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">...</span>
<span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
</code></pre></div>
<p>Please see the entire <a href="http://jsfiddle.net/girlie\_mac/CcqU7/" target=\_blank">code snippet and working demo</a>!</p>

<p>Also, I made <a href="http://jsfiddle.net/girlie\_mac/5Assc/" target=\_blank">another small demo here</a> so you can see when the <code>input</code>, <code>keuyp</code>, and <code>change</code> are captured.</p>

<h2>onsearch Event</h2>

<p>Additionally, there is another HTML5 event that you probably want to know &#8211; the <code>search</code>. The action is invoked when a user hits the enter key or clears the query (by clicking the (x) in a search control.<br>
I can&#8217;t find any references in WHATWG or W3C, and apparently, its upport Level is the Apple extension. I tested it work on the latest Chrome, but not on Firefox 9 or Opera 11.5.</p>

<p><img src="/assets/images/wp-content/uploads/2011/11/input-search.png" alt="input[type=search]" title="input-search" width="250" height="115" class="alignnone size-full wp-image-347" /></p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;search&quot;</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Enter a Twitter username...&quot;</span> <span class="na">results=</span><span class="s">&quot;5&quot;</span> <span class="na">id=</span><span class="s">&quot;search&quot;</span> <span class="nt">/&gt;</span>
</code></pre></div><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;search&quot;</span><span class="p">);</span>
<span class="nx">s</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;search&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">q</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="nx">showTweets</span><span class="p">(</span><span class="nx">q</span><span class="p">);</span>
<span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
<span class="p">...</span>
</code></pre></div>
<p>The <a href="http://jsfiddle.net/girlie\_mac/sfxYG/" target=\_blank">code snippet and demo</a> is at jsFiddle, too!</p>

<h2>References</h2>

<p><a href="http://www.whatwg.org/specs/web-forms/current-work/" target=_blank">whatwg.org &#8211; Web Forms 2.0</a><br>
<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#handler-oninput" target=_blank">whatwg.org &#8211; oninput Event Handler</a><br>
<a href="http://whattheheadsaid.com/2010/09/effectively-detecting-user-input-in-javascript" target=_blank">Effectively detecting user input in JavaScript</a><br>
<a href="http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/Attributes.html#//apple\_ref/html/attribute/onsearc" target=\_blank">Safari HTML Reference (onsearch)</a></p>

      <hr>
      
      <!-- Pagination -->
      <ul class="pagination">
	      
	        <li class="prev"><a href="/blog/2011/10/26/creating-usable-enyo-ui-buttons-and-interactive-dialogs/" rel="prev">&larr; Creating Usable Enyo UI &#8211; Buttons and Interactive Dialogs</a></li>
	      
	      
	        <li class="next"><a href="/blog/2011/11/28/html5-form-field-validation-with-css3/" rel="next">HTML5 Form Field Validation with CSS3 &rarr;</a></li>
	      
	  </ul>
	  
      <hr style="visibility:hidden;">
      
      <!-- Categories -->
      
	  <ul class="categories">
	      <li><i class="icon-drawer"></i></li>
	      
	      
	      
		     
		    	<li data-size="20"><a href="/categories/#html5">
		    		html5
		    	</a></li>
		     
		    	<li data-size="8"><a href="/categories/#javascript">
		    		javascript
		    	</a></li>
		     
		    	<li data-size="13"><a href="/categories/#ui/ux">
		    		ui/ux
		    	</a></li>
		    
		  
	      
	  
	  </ul>
	   
	  
	  <!-- Disqus -->
	      <div id="disqus_thread" style="margin-top: 3em"></div>
		    <script type="text/javascript">
		        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		        var disqus_shortname = 'girliemac'; // required: replace example with your forum shortname
				
				
		        /* * * DON'T EDIT BELOW THIS LINE * * */
		        (function() {
		            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		        })();
		    </script>
		    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">
	  
    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#main -->

<footer> 
  <small class="copyright">
    <span>&copy; 2014 Tomomi Imura. Powered by <a href="http://jekyllrb.com">Jekyll</a> with modified <em>Minimal Mistakes</em> theme. Hosted on <a href="http://github.com">Github</a>.
  </small>
</footer>

<script src="/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-2635445-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<script>

</script>	        

</body>
</html>
